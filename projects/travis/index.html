<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Balance Bot | Noah West </title> <meta name="author" content="Noah West"> <meta name="description" content="A custom-designed balancing robot using teensy and C++"> <meta name="keywords" content="robotics, engineering, robotics-engineering, automation, jekyll, portfolio-website"> <meta property="og:site_name" content="Noah West"> <meta property="og:type" content="website"> <meta property="og:title" content="Noah West | Balance Bot"> <meta property="og:url" content="https://nWestie.github.io/projects/travis/"> <meta property="og:description" content="A custom-designed balancing robot using teensy and C++"> <meta property="og:image" content="/assets/img/prof_pic.jpg"> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Balance Bot"> <meta name="twitter:description" content="A custom-designed balancing robot using teensy and C++"> <meta name="twitter:image" content="/assets/img/prof_pic.jpg"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.webp?78677d414fd6f0722827c127adde95f7"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nwestie.github.io/projects/travis/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Noah</span> West </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Github </a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">Resume </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Balance Bot</h1> <p class="post-description">A custom-designed balancing robot using teensy and C++</p> </header> <article> <div class="row justify-content-sm-center"> <div class="col-md-4 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/travis-closed-200.webp 200w,/assets/img/travis/travis-closed-480.webp 480w,/assets/img/travis/travis-closed-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/travis-closed.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balancing robot, Travis" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-md-4 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/travis-open-200.webp 200w,/assets/img/travis/travis-open-480.webp 480w,/assets/img/travis/travis-open-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/travis-open.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Balancing robot, Travis" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>My senior year of high school, I requested an independant study in robotics, with my primary project being the design of a 2 wheeled balancing robot. I designed this robot(eventually dubbed Travis) from scratch, with the goal being to have it balance itself on two wheels and be controlled over bluetooth from my phone. This project ended up taking the entire year, and while it was balancing by the end of the year, it required constant attention and trimming to keep it in one place. After graduating, I’ve continued to iterate on the design, attempting to make it balance more robustly.</p> <p>I designed the chassis and electronics myself, using Autodesk Fusion 360 for the mechanical parts, and a tool called <a href="https://bancika.github.io/diy-layout-creator/" rel="external nofollow noopener" target="_blank">DIY-LC</a> to plan the electronics. In hindsight, there are much better ways to have planned the electronics, but this got the job done at the time and allowed me to plan how I would lay things out on the perf-board. The main controller is a teensy LC microcontroller, which I programmed using the Arduino framework, and paired with a bluetooth chip, an accelerometer/gyroscope, and a motor driver. The bot could sense it’s pitch angle using the accelerometer and wheel rotation from the encodors on the drive motors, and from this information a balancing controller could keep it upright.</p> <div class="row justify-content-sm-center"> <div class="col-md-5 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/BalBotTeensy-200.webp 200w,/assets/img/travis/BalBotTeensy-480.webp 480w,/assets/img/travis/BalBotTeensy-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/BalBotTeensy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="the electronics diagram for Travis" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-md-5 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/cad-200.webp 200w,/assets/img/travis/cad-480.webp 480w,/assets/img/travis/cad-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/cad.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="CAD design of 3D printed shell" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The robot code is written in C++, using the Arduino libraries for the teensy, and uses a PID controller to balance the robot based on the bluetooth input and sensor readings. Travis can connect to any bluetooth device, and initially was programmed to interface with a customizable bluetooth control app I discovered. I was learning C++ as I wrote the code for this project, and while I learned a lot through this process, it did mean I ended up rewriting large chunks of the code many times over. The current code for the bot is on github, linked in the tile below.</p> <div class="repositories d-flex flex-wrap flex-md-row flex-column justify-content-sm-center"> <div class="repo p-2 text-center"> <a href="https://github.com/nWestie/BalanceBot" rel="external nofollow noopener" target="_blank"> <img class="repo-img-light w-100" alt="nWestie/BalanceBot" src="https://github-readme-stats.vercel.app/api/pin/?username=nWestie&amp;repo=BalanceBot&amp;theme=default&amp;show_owner=false"> <img class="repo-img-dark w-100" alt="nWestie/BalanceBot" src="https://github-readme-stats.vercel.app/api/pin/?username=nWestie&amp;repo=BalanceBot&amp;theme=dark&amp;show_owner=false"> </a> </div> </div> <div class="row justify-content-sm-center"> <div class="col-md-8 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/phone-200.webp 200w,/assets/img/travis/phone-480.webp 480w,/assets/img/travis/phone-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/phone.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Phone Controller" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>More recently, I wrote a custom python interface for windows, which makes it easier to update and tune the PID constants on the fly, as well as logging data from the robot for later analysis. The app is written in python using <a href="https://kivy.org" rel="external nofollow noopener" target="_blank">Kivy</a> for the UI, and connects over bluetooth serial to the robot, much like the phone controller. Having logs of all the accelerometer and encoder data from the bot makes it easier to tune it’s performance, measure change over time, and see exactly what the bot was measuring at times when it behaved undesirably. This python project hosted on github in the project below.</p> <div class="repositories d-flex flex-md-row justify-content-sm-center"> <div class="repo p-2 text-center"> <a href="https://github.com/nWestie/BalBotClient" rel="external nofollow noopener" target="_blank"> <img class="repo-img-light w-100" alt="nWestie/BalBotClient" src="https://github-readme-stats.vercel.app/api/pin/?username=nWestie&amp;repo=BalBotClient&amp;theme=default&amp;show_owner=false"> <img class="repo-img-dark w-100" alt="nWestie/BalBotClient" src="https://github-readme-stats.vercel.app/api/pin/?username=nWestie&amp;repo=BalBotClient&amp;theme=dark&amp;show_owner=false"> </a> </div> </div> <div class="row justify-content-sm-center"> <div class="col-md-8 align-self-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/travis/desktop-200.webp 200w,/assets/img/travis/desktop-480.webp 480w,/assets/img/travis/desktop-800.webp 800w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/travis/desktop.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Completed 3D construction model of the set" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Currently, my goal is to use this new interface to refine the movement of Travis, hopefully using the encoders to allow it to hold position without drifting, make turns, and limit its acceleration to prevent itself from falling over. I have begun re-writing the PID controller and other parts of the bot-side code to make this happen, but it is still a work in progress.</p> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Noah West. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?fcfacfb8c6281f5e68d5a7d348186eb1"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> </body> </html>